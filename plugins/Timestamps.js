function l(e){window.enmity.plugins.registerPlugin(e)}const r={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:e=>window.enmity.modules.filters.byName(e),byTypeName:e=>window.enmity.modules.filters.byTypeName(e),byTypeString:(...e)=>window.enmity.modules.filters.byTypeString(...e),byDefaultString:(...e)=>window.enmity.modules.filters.byDefaultString(...e),byString:(...e)=>window.enmity.modules.filters.byString(...e)};function c(...e){return window.enmity.modules.bulk(...e)}function s(e){return window.enmity.patcher.create(e)}const[m,p]=c(r.byProps("sendMessage"),r.byProps("uploadLocalFiles")),o=new RegExp("(?:0?\\d|1[0-2]):[0-5]\\d\\s*[ap]m|(?:[01]?\\d|2[0-3]):[0-5]\\d","gi");function d(e){const t=e.slice(-2).toLowerCase();let n=e.slice(0,-2).split(":"),i;return t==="am"?(n[0]=n[0]==="12"?"00":n[0],i=n.join(":")):t==="pm"?(n[0]=String(Number(n[0])%12+12),i=n.join(":")):i=e,i}function a(e){const t=new Date().toISOString().replace(/T/," ").replace(/\..+/,"").replace(/\d?\d:\d\d/,d(e).trim()),n=Math.round(new Date(t).getTime()/1e3);return isNaN(n)?e:`<t:${n}:t>`}const u={name:"Timestamps",patches:[],onStart(){s("message-timestamp-patcher").before(m,"sendMessage",(e,t,n)=>{t[1].content.search(o)!==-1&&(t[1].content=t[1].content.replace(o,i=>a(i)))}),s("upload-timestamp-patcher").before(p,"uploadLocalFiles",(e,t,n)=>{t[3].content.search(o)!==-1&&(t[3].content=t[3].content.replace(o,i=>a(i)))})},onStop(){this.patches=[]}};l(u);
